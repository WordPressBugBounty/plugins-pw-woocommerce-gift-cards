{"version":3,"file":"blocks.js","mappings":";;;;;;;;;;AAAA,2C;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;;;;;;ACNA;AACA,CAAC,MAAM;EACL;EACA,IAAI,CAACA,MAAM,CAACC,EAAE,IAAI,CAACD,MAAM,CAACE,EAAE,EAAE;EAE9B,MAAM;IAAEC,EAAE;IAAEC;EAAQ,CAAC,GAAGH,EAAE,CAACI,IAAI,IAAI;IAAEF,EAAE,EAAGG,CAAC,IAAKA,CAAC;IAAEF,OAAO,EAAGE,CAAC,IAAKA;EAAE,CAAC;EACtE,MAAM;IAAEC;EAAe,CAAC,GAAGN,EAAE,CAACO,OAAO;EACrC,MAAM;IAAEC;EAAO,CAAC,GAAGR,EAAE,CAACS,UAAU;EAChC,MAAM;IAAEC;EAAS,CAAC,GAAGV,EAAE,CAACW,OAAO;EAC/B,MAAM;IAAEC,WAAW;IAAEC;EAAU,CAAC,GAAGb,EAAE,CAACc,IAAI;;EAE1C;EACA,MAAMC,cAAc,GAAGd,EAAE,CAACc,cAAc,IAAId,EAAE,CAACe,MAAM,IAAI,CAAC,CAAC;EAC3D,MAAM;IAAEC,qBAAqB;IAAEC;EAAoB,CAAC,GAAGH,cAAc,IAAI,CAAC,CAAC;;EAE3E;EACA,MAAMI,SAAS,GAAIlB,EAAE,CAACmB,YAAY,IAAInB,EAAE,CAACmB,YAAY,CAACD,SAAS,IAAK,eAAe;EAEnF,IAAI,CAACF,qBAAqB,IAAI,CAACL,WAAW,IAAI,CAACC,SAAS,EAAE;;EAE1D;EACA,MAAMQ,SAAS,GAAG,eAAe;EAEjC,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;IACpC,MAAM,CAACe,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;IACvD,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;;IAE1C;IACA,MAAMmB,QAAQ,GAAGhB,SAAS,CACvBiB,MAAM,IAAK;MACV,MAAMzB,CAAC,GAAGyB,MAAM,CAACX,SAAS,CAAC;MAC3B,OAAOd,CAAC,IAAIA,CAAC,CAAC0B,WAAW,GAAG1B,CAAC,CAAC0B,WAAW,CAAC,CAAC,GAAG,IAAI;IACpD,CAAC,EACD,EACF,CAAC;;IAED;IACA,MAAMC,SAAS,GACZH,QAAQ,IACPA,QAAQ,CAACI,UAAU,IACnBJ,QAAQ,CAACI,UAAU,CAACZ,SAAS,CAAC,IAC9BQ,QAAQ,CAACI,UAAU,CAACZ,SAAS,CAAC,CAACa,UAAU,IAC3C,EAAE;IAEJ,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI,CAACZ,IAAI,EAAE;QACTK,SAAS,CAAC;UAAEQ,MAAM,EAAE,OAAO;UAAEC,OAAO,EAAEnC,EAAE,CAAC,yBAAyB,EAAE,2BAA2B;QAAE,CAAC,CAAC;QACnG;MACF;MACAwB,eAAe,CAAC,IAAI,CAAC;MACrBE,SAAS,CAAC,IAAI,CAAC;MAEf,IAAI;QACF,MAAMV,mBAAmB,CAAC;UAAEoB,SAAS,EAAEjB,SAAS;UAAEP,IAAI,EAAE;YAAES;UAAK;QAAE,CAAC,CAAC;QACnEC,OAAO,CAAC,EAAE,CAAC;MACb,CAAC,CAAC,OAAOe,GAAG,EAAE;QACZX,SAAS,CAAC;UAAEQ,MAAM,EAAE,OAAO;UAAEC,OAAO,EAAEE,GAAG,EAAEF,OAAO,IAAInC,EAAE,CAAC,uBAAuB,EAAE,2BAA2B;QAAE,CAAC,CAAC;MACnH,CAAC,SAAS;QACRwB,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC;IAED,MAAMc,YAAY,GAAG,MAAOC,UAAU,IAAK;MACzCf,eAAe,CAAC,IAAI,CAAC;MACrBE,SAAS,CAAC,IAAI,CAAC;MAEf,IAAI;QACF,MAAMV,mBAAmB,CAAC;UACxBoB,SAAS,EAAEjB,SAAS;UACpBP,IAAI,EAAE;YACJS,IAAI,EAAEkB,UAAU;YAChBC,MAAM,EAAE;UACV;QACF,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOH,GAAG,EAAE;QACZX,SAAS,CAAC;UACRQ,MAAM,EAAE,OAAO;UACfC,OAAO,EAAEE,GAAG,EAAEF,OAAO,IAAInC,EAAE,CAAC,6BAA6B,EAAE,2BAA2B;QACxF,CAAC,CAAC;MACJ,CAAC,SAAS;QACRwB,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC;IAED,oBACEiB,sDAAA,CAAC1B,qBAAqB;MAAA2B,QAAA,eACpBC,uDAAA;QAAKC,EAAE,EAAC,iCAAiC;QAAAF,QAAA,GACtCZ,SAAS,CAACe,MAAM,GAAG,CAAC,iBACnBF,uDAAA;UAAKG,SAAS,EAAC,yBAAyB;UAAAJ,QAAA,gBACtCD,sDAAA;YAAKK,SAAS,EAAC,+BAA+B;YAAAJ,QAAA,EAC3C1C,EAAE,CAAC,oBAAoB,EAAE,2BAA2B;UAAC,CACnD,CAAC,eACNyC,sDAAA;YAAIK,SAAS,EAAC,8BAA8B;YAAAJ,QAAA,EACzCZ,SAAS,CAACiB,GAAG,CAAEC,IAAI,iBAClBL,uDAAA;cAAsBG,SAAS,EAAC,8BAA8B;cAAAJ,QAAA,gBAC5DC,uDAAA;gBAAKG,SAAS,EAAC,8BAA8B;gBAAAJ,QAAA,gBAC3CD,sDAAA;kBAAKK,SAAS,EAAC,uBAAuB;kBAAAJ,QAAA,EACnCM,IAAI,CAACC;gBAAM,CACT,CAAC,eACNR,sDAAA;kBAAKK,SAAS,EAAC,kCAAkC;kBAAAJ,QAAA,EAC9CM,IAAI,CAACE,OAAO,iBACXT,sDAAA;oBAAKK,SAAS,EAAC,wBAAwB;oBAAAJ,QAAA,EACpCzC,OAAO,CACND,EAAE,CAAC,yBAAyB,EAAE,2BAA2B,CAAC,EAC1DgD,IAAI,CAACE,OACP;kBAAC,CACE;gBACN,CACE,CAAC;cAAA,CACH,CAAC,eAENT,sDAAA;gBAAKK,SAAS,EAAC,+BAA+B;gBAAAJ,QAAA,EAC3CM,IAAI,CAACG,MAAM,iBACVR,uDAAA;kBAAMG,SAAS,EAAC,uBAAuB;kBAAAJ,QAAA,GACpCM,IAAI,CAACG,MAAM,eAEZV,sDAAA;oBACEW,IAAI,EAAC,QAAQ;oBACbN,SAAS,EAAC,uBAAuB;oBACjCO,OAAO,EAAEA,CAAA,KAAMf,YAAY,CAACU,IAAI,CAACC,MAAM,CAAE;oBACzC,cAAYhD,OAAO,CACjBD,EAAE,CAAC,qBAAqB,EAAE,2BAA2B,CAAC,EACtDgD,IAAI,CAACC,MACP,CAAE;oBACFK,QAAQ,EAAE/B,YAAa;oBAAAmB,QAAA,EACxB;kBAED,CAAQ,CAAC;gBAAA,CACL;cACP,CACE,CAAC;YAAA,GApCCM,IAAI,CAACC,MAqCV,CACL;UAAC,CACA,CAAC;QAAA,CACF,CACN,eAGDN,uDAAA;UACEY,QAAQ,EAAGC,CAAC,IAAK;YACfA,CAAC,CAACC,cAAc,CAAC,CAAC;YAClBxB,MAAM,CAAC,CAAC;UACV,CAAE;UACFyB,UAAU;UAAAhB,QAAA,gBAEVD,sDAAA;YAAOkB,OAAO,EAAC,8BAA8B;YAAAjB,QAAA,EAC1C1C,EAAE,CAAC,mBAAmB,EAAE,2BAA2B;UAAC,CAChD,CAAC,eAERyC,sDAAA;YACEG,EAAE,EAAC,8BAA8B;YACjCQ,IAAI,EAAC,MAAM;YACXQ,KAAK,EAAEvC,IAAK;YACZwC,QAAQ,EAAGL,CAAC,IAAKlC,OAAO,CAACkC,CAAC,CAACM,MAAM,CAACF,KAAK,CAAE;YACzCG,WAAW,EAAE/D,EAAE,CAAC,kBAAkB,EAAE,2BAA2B,CAAE;YACjE,cAAYA,EAAE,CAAC,kBAAkB,EAAE,2BAA2B,CAAE;YAChEsD,QAAQ,EAAE/B;UAAa,CACxB,CAAC,eAEFkB,sDAAA;YACEW,IAAI,EAAC,QAAQ;YACbN,SAAS,EAAE,0DACTvB,YAAY,GAAG,YAAY,GAAG,EAAE,EAC/B;YACH+B,QAAQ,EAAE/B,YAAa;YACvB,aAAWA,YAAa;YAAAmB,QAAA,EAEvB1C,EAAE,CAAC,iBAAiB,EAAE,2BAA2B;UAAC,CAC7C,CAAC,EAERyB,MAAM,iBACLgB,sDAAA,CAACnC,MAAM;YAAC4B,MAAM,EAAET,MAAM,CAACS,MAAO;YAAC8B,aAAa,EAAE,KAAM;YAAAtB,QAAA,EACjDjB,MAAM,CAACU;UAAO,CACT,CACT;QAAA,CACG,CAAC;MAAA,CACJ;IAAC,CACe,CAAC;EAE5B,CAAC;;EAED;EACA/B,cAAc,CAAC,6BAA6B,EAAE;IAC5C6D,MAAM,EAAE7C,aAAa;IACrB8C,KAAK,EAAE;EACT,CAAC,CAAC;EACF9D,cAAc,CAAC,yBAAyB,EAAE;IACxC6D,MAAM,EAAE7C,aAAa;IACrB8C,KAAK,EAAE;EACT,CAAC,CAAC;AACJ,CAAC,EAAE,CAAC,C","sources":["webpack://pw-gift-cards/external window \"ReactJSXRuntime\"","webpack://pw-gift-cards/webpack/bootstrap","webpack://pw-gift-cards/webpack/runtime/compat get default export","webpack://pw-gift-cards/webpack/runtime/define property getters","webpack://pw-gift-cards/webpack/runtime/hasOwnProperty shorthand","webpack://pw-gift-cards/webpack/runtime/make namespace object","webpack://pw-gift-cards/./assets/blocks/blocks.jsx"],"sourcesContent":["module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* global wc, wp */\r\n(() => {\r\n  // Bail if Blocks globals aren’t present\r\n  if (!window.wp || !window.wc) return;\r\n\r\n  const { __, sprintf } = wp.i18n || { __: (s) => s, sprintf: (s) => s };\r\n  const { registerPlugin } = wp.plugins;\r\n  const { Notice } = wp.components;\r\n  const { useState } = wp.element;\r\n  const { useDispatch, useSelect } = wp.data;\r\n\r\n  // Woo Blocks slot and helpers\r\n  const blocksCheckout = wc.blocksCheckout || wc.blocks || {};\r\n  const { ExperimentalOrderMeta, extensionCartUpdate } = blocksCheckout || {};\r\n\r\n  // Cart data store key\r\n  const cartStore = (wc.wcBlocksData && wc.wcBlocksData.cartStore) || 'wc/store/cart';\r\n\r\n  if (!ExperimentalOrderMeta || !useDispatch || !useSelect) return;\r\n\r\n  // Store API extensions namespace\r\n  const NAMESPACE = 'pw-gift-cards';\r\n\r\n  const ApplyGiftCard = () => {\r\n    const [code, setCode] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [notice, setNotice] = useState(null);\r\n\r\n    // Get full cart data so we can read our extension data\r\n    const cartData = useSelect(\r\n      (select) => {\r\n        const s = select(cartStore);\r\n        return s && s.getCartData ? s.getCartData() : null;\r\n      },\r\n      []\r\n    );\r\n\r\n    // Applied gift cards coming from the Store API extensions payload\r\n    const giftCards =\r\n      (cartData &&\r\n        cartData.extensions &&\r\n        cartData.extensions[NAMESPACE] &&\r\n        cartData.extensions[NAMESPACE].gift_cards) ||\r\n      [];\r\n\r\n    const submit = async () => {\r\n      if (!code) {\r\n        setNotice({ status: 'error', message: __('Enter a gift card code.', 'pw-woocommerce-gift-cards') });\r\n        return;\r\n      }\r\n      setIsSubmitting(true);\r\n      setNotice(null);\r\n\r\n      try {\r\n        await extensionCartUpdate({ namespace: NAMESPACE, data: { code } });\r\n        setCode('');\r\n      } catch (err) {\r\n        setNotice({ status: 'error', message: err?.message || __('Something went wrong.', 'pw-woocommerce-gift-cards') });\r\n      } finally {\r\n        setIsSubmitting(false);\r\n      }\r\n    };\r\n\r\n    const handleRemove = async (cardNumber) => {\r\n      setIsSubmitting(true);\r\n      setNotice(null);\r\n\r\n      try {\r\n        await extensionCartUpdate({\r\n          namespace: NAMESPACE,\r\n          data: {\r\n            code: cardNumber,\r\n            remove: true,\r\n          },\r\n        });\r\n      } catch (err) {\r\n        setNotice({\r\n          status: 'error',\r\n          message: err?.message || __('Unable to remove gift card.', 'pw-woocommerce-gift-cards'),\r\n        });\r\n      } finally {\r\n        setIsSubmitting(false);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <ExperimentalOrderMeta>\r\n        <div id=\"pwgc-redeem-gift-card-container\">\r\n          {giftCards.length > 0 && (\r\n            <div className=\"pwgc-applied-gift-cards\">\r\n              <div className=\"pwgc-applied-gift-cards-title\">\r\n                {__('Gift cards applied', 'pw-woocommerce-gift-cards')}\r\n              </div>\r\n              <ul className=\"pwgc-applied-gift-cards-list\">\r\n                {giftCards.map((card) => (\r\n                  <li key={card.number} className=\"pwgc-applied-gift-cards-item\">\r\n                    <div className=\"pwgc-applied-gift-cards-left\">\r\n                      <div className=\"pwgc-gift-card-number\">\r\n                        {card.number}\r\n                      </div>\r\n                      <div className=\"pwgc-gift-card-remaining-balance\">\r\n                        {card.balance && (\r\n                          <div className=\"pwgc-gift-card-balance\">\r\n                            {sprintf(\r\n                              __('Remaining balance is %s', 'pw-woocommerce-gift-cards'),\r\n                              card.balance\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"pwgc-applied-gift-cards-right\">\r\n                      {card.amount && (\r\n                        <span className=\"pwgc-gift-card-amount\">\r\n                          {card.amount}\r\n\r\n                          <button\r\n                            type=\"button\"\r\n                            className=\"pwgc-remove-gift-card\"\r\n                            onClick={() => handleRemove(card.number)}\r\n                            aria-label={sprintf(\r\n                              __('Remove gift card %s', 'pw-woocommerce-gift-cards'),\r\n                              card.number\r\n                            )}\r\n                            disabled={isSubmitting}\r\n                          >\r\n                            ×\r\n                          </button>\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n\r\n          <form\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              submit();\r\n            }}\r\n            noValidate\r\n          >\r\n            <label htmlFor=\"pwgc-redeem-gift-card-number\">\r\n              {__('Have a gift card?', 'pw-woocommerce-gift-cards')}\r\n            </label>\r\n\r\n            <input\r\n              id=\"pwgc-redeem-gift-card-number\"\r\n              type=\"text\"\r\n              value={code}\r\n              onChange={(e) => setCode(e.target.value)}\r\n              placeholder={__('Gift card number', 'pw-woocommerce-gift-cards')}\r\n              aria-label={__('Gift card number', 'pw-woocommerce-gift-cards')}\r\n              disabled={isSubmitting}\r\n            />\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className={`pwgc-apply-gift-card-button wc-block-components-button ${\r\n                isSubmitting ? 'is-loading' : ''\r\n              }`}\r\n              disabled={isSubmitting}\r\n              aria-busy={isSubmitting}\r\n            >\r\n              {__('Apply Gift Card', 'pw-woocommerce-gift-cards')}\r\n            </button>\r\n\r\n            {notice && (\r\n              <Notice status={notice.status} isDismissible={false}>\r\n                {notice.message}\r\n              </Notice>\r\n            )}\r\n          </form>\r\n        </div>\r\n      </ExperimentalOrderMeta>\r\n    );\r\n  };\r\n\r\n  // Register for both checkout and cart scopes\r\n  registerPlugin('pw-apply-gift-card-checkout', {\r\n    render: ApplyGiftCard,\r\n    scope: 'woocommerce-checkout',\r\n  });\r\n  registerPlugin('pw-apply-gift-card-cart', {\r\n    render: ApplyGiftCard,\r\n    scope: 'woocommerce-cart',\r\n  });\r\n})();"],"names":["window","wp","wc","__","sprintf","i18n","s","registerPlugin","plugins","Notice","components","useState","element","useDispatch","useSelect","data","blocksCheckout","blocks","ExperimentalOrderMeta","extensionCartUpdate","cartStore","wcBlocksData","NAMESPACE","ApplyGiftCard","code","setCode","isSubmitting","setIsSubmitting","notice","setNotice","cartData","select","getCartData","giftCards","extensions","gift_cards","submit","status","message","namespace","err","handleRemove","cardNumber","remove","_jsx","children","_jsxs","id","length","className","map","card","number","balance","amount","type","onClick","disabled","onSubmit","e","preventDefault","noValidate","htmlFor","value","onChange","target","placeholder","isDismissible","render","scope"],"sourceRoot":""}